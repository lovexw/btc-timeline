<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯”ç‰¹å¸å¤§äº‹è®° - åŠŸèƒ½æ¼”ç¤º</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f5f5f5;
        }
        .demo-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .demo-button {
            background: #f7931a;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .demo-button:hover {
            background: #e0830a;
        }
        .demo-result {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            border-left: 4px solid #f7931a;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .stat-card {
            background: #f7931a;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
        }
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <h1><img src="bitcoin-logo.svg" alt="Bitcoin Logo" style="height: 1.2em; vertical-align: middle; margin-right: 0.3em;"> æ¯”ç‰¹å¸å¤§äº‹è®° - åŠŸèƒ½æ¼”ç¤º</h1>
    <p>è¿™ä¸ªé¡µé¢ç”¨äºæ¼”ç¤ºæ¯”ç‰¹å¸å¤§äº‹è®°ç½‘ç«™çš„å„ç§åŠŸèƒ½å’Œæ•°æ®éªŒè¯ã€‚</p>

    <div class="demo-section">
        <h2>ğŸ“Š æ•°æ®éªŒè¯</h2>
        <button class="demo-button" onclick="validateData()">éªŒè¯æ•°æ®å®Œæ•´æ€§</button>
        <button class="demo-button" onclick="showStatistics()">æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯</button>
        <div id="validation-result" class="demo-result" style="display: none;"></div>
    </div>

    <div class="demo-section">
        <h2>ğŸ” æœç´¢åŠŸèƒ½æµ‹è¯•</h2>
        <input type="text" id="search-input" placeholder="è¾“å…¥æœç´¢å…³é”®è¯..." style="width: 200px; padding: 8px; margin-right: 10px;">
        <button class="demo-button" onclick="testSearch()">æœç´¢</button>
        <div id="search-result" class="demo-result" style="display: none;"></div>
    </div>

    <div class="demo-section">
        <h2>ğŸ“… å¹´ä»½ç­›é€‰æµ‹è¯•</h2>
        <select id="year-select" style="padding: 8px; margin-right: 10px;">
            <option value="">é€‰æ‹©å¹´ä»½</option>
            <option value="2008">2008</option>
            <option value="2009">2009</option>
            <option value="2010">2010</option>
            <option value="2011">2011</option>
            <option value="2012">2012</option>
            <option value="2013">2013</option>
            <option value="2014">2014</option>
            <option value="2015">2015</option>
            <option value="2016">2016</option>
            <option value="2017">2017</option>
            <option value="2018">2018</option>
            <option value="2019">2019</option>
            <option value="2020">2020</option>
            <option value="2021">2021</option>
            <option value="2022">2022</option>
            <option value="2023">2023</option>
            <option value="2024">2024</option>
        </select>
        <button class="demo-button" onclick="testYearFilter()">ç­›é€‰</button>
        <div id="year-result" class="demo-result" style="display: none;"></div>
    </div>

    <div class="demo-section">
        <h2>ğŸ’¾ æ•°æ®å¯¼å‡ºæµ‹è¯•</h2>
        <button class="demo-button" onclick="exportJSON()">å¯¼å‡ºJSON</button>
        <button class="demo-button" onclick="exportCSV()">å¯¼å‡ºCSV</button>
        <div id="export-result" class="demo-result" style="display: none;"></div>
    </div>

    <div class="demo-section">
        <h2>ğŸ“ˆ ç»Ÿè®¡ä¿¡æ¯</h2>
        <div id="statistics-container"></div>
    </div>

    <div class="demo-section">
        <h2>ğŸ”— å¿«é€Ÿé“¾æ¥</h2>
        <button class="demo-button" onclick="window.open('index.html', '_blank')">æ‰“å¼€ä¸»ç½‘ç«™</button>
        <button class="demo-button" onclick="window.open('README.md', '_blank')">æŸ¥çœ‹README</button>
    </div>

    <!-- åŠ è½½å¿…éœ€çš„è„šæœ¬ -->
    <script src="data.js"></script>
    <script src="utils.js"></script>
    
    <script>
        // æ•°æ®éªŒè¯åŠŸèƒ½
        function validateData() {
            const resultDiv = document.getElementById('validation-result');
            resultDiv.style.display = 'block';
            
            try {
                const errors = BitcoinTimelineUtils.validateData(bitcoinData);
                
                if (errors.length === 0) {
                    resultDiv.innerHTML = '<span class="success">âœ… æ•°æ®éªŒè¯é€šè¿‡ï¼æ‰€æœ‰æ•°æ®ç»“æ„å®Œæ•´ã€‚</span>';
                } else {
                    resultDiv.innerHTML = '<span class="error">âŒ å‘ç°æ•°æ®é—®é¢˜ï¼š</span><ul>' + 
                        errors.map(error => `<li>${error}</li>`).join('') + '</ul>';
                }
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">âŒ éªŒè¯è¿‡ç¨‹ä¸­å‡ºé”™ï¼š${error.message}</span>`;
            }
        }

        // æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
        function showStatistics() {
            const resultDiv = document.getElementById('validation-result');
            resultDiv.style.display = 'block';
            
            try {
                const stats = BitcoinTimelineUtils.getStatistics(bitcoinData);
                
                let html = '<h3>ğŸ“Š æ•°æ®ç»Ÿè®¡</h3>';
                html += '<div class="stats-grid">';
                html += `<div class="stat-card"><div class="stat-number">${stats.totalEvents}</div><div class="stat-label">æ€»äº‹ä»¶æ•°</div></div>`;
                html += `<div class="stat-card"><div class="stat-number">${stats.yearRange.start}-${stats.yearRange.end}</div><div class="stat-label">å¹´ä»½èŒƒå›´</div></div>`;
                
                const categoryCount = Object.keys(stats.categories).length;
                html += `<div class="stat-card"><div class="stat-number">${categoryCount}</div><div class="stat-label">æ ‡ç­¾ç±»åˆ«</div></div>`;
                
                if (stats.priceRange.min && stats.priceRange.max) {
                    html += `<div class="stat-card"><div class="stat-number">$${stats.priceRange.min.toLocaleString()}</div><div class="stat-label">æœ€ä½ä»·æ ¼</div></div>`;
                    html += `<div class="stat-card"><div class="stat-number">$${stats.priceRange.max.toLocaleString()}</div><div class="stat-label">æœ€é«˜ä»·æ ¼</div></div>`;
                }
                
                html += '</div>';
                
                if (Object.keys(stats.categories).length > 0) {
                    html += '<h4>ğŸ·ï¸ æ ‡ç­¾åˆ†å¸ƒï¼š</h4><ul>';
                    Object.entries(stats.categories).forEach(([tag, count]) => {
                        html += `<li>${tag}: ${count} æ¬¡</li>`;
                    });
                    html += '</ul>';
                }
                
                resultDiv.innerHTML = html;
                
                // åŒæ—¶æ›´æ–°ç»Ÿè®¡ä¿¡æ¯åŒºåŸŸ
                document.getElementById('statistics-container').innerHTML = html;
                
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">âŒ ç»Ÿè®¡è¿‡ç¨‹ä¸­å‡ºé”™ï¼š${error.message}</span>`;
            }
        }

        // æœç´¢åŠŸèƒ½æµ‹è¯•
        function testSearch() {
            const searchTerm = document.getElementById('search-input').value;
            const resultDiv = document.getElementById('search-result');
            resultDiv.style.display = 'block';
            
            if (!searchTerm) {
                resultDiv.innerHTML = '<span class="error">âŒ è¯·è¾“å…¥æœç´¢å…³é”®è¯</span>';
                return;
            }
            
            try {
                const results = BitcoinTimelineUtils.searchEvents(bitcoinData, searchTerm);
                
                let html = `<h3>ğŸ” æœç´¢ç»“æœï¼š"${searchTerm}"</h3>`;
                
                let totalResults = 0;
                Object.entries(results).forEach(([section, items]) => {
                    if (items.length > 0) {
                        html += `<h4>${section} (${items.length})</h4><ul>`;
                        items.forEach(item => {
                            html += `<li><strong>${item.title || item.amount}</strong> - ${item.description || item.details}</li>`;
                        });
                        html += '</ul>';
                        totalResults += items.length;
                    }
                });
                
                if (totalResults === 0) {
                    html += '<p>æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ç»“æœã€‚</p>';
                } else {
                    html += `<p><strong>æ€»å…±æ‰¾åˆ° ${totalResults} ä¸ªç»“æœ</strong></p>`;
                }
                
                resultDiv.innerHTML = html;
                
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">âŒ æœç´¢è¿‡ç¨‹ä¸­å‡ºé”™ï¼š${error.message}</span>`;
            }
        }

        // å¹´ä»½ç­›é€‰æµ‹è¯•
        function testYearFilter() {
            const year = document.getElementById('year-select').value;
            const resultDiv = document.getElementById('year-result');
            resultDiv.style.display = 'block';
            
            if (!year) {
                resultDiv.innerHTML = '<span class="error">âŒ è¯·é€‰æ‹©å¹´ä»½</span>';
                return;
            }
            
            try {
                const filteredData = BitcoinTimelineUtils.filterByYear(bitcoinData, year);
                
                let html = `<h3>ğŸ“… ${year}å¹´äº‹ä»¶ç­›é€‰ç»“æœ</h3>`;
                
                let totalEvents = 0;
                Object.entries(filteredData).forEach(([section, items]) => {
                    if (items.length > 0) {
                        html += `<h4>${section} (${items.length})</h4><ul>`;
                        items.forEach(item => {
                            const title = item.title || item.amount || 'æœªçŸ¥';
                            const description = item.description || item.details || '';
                            html += `<li><strong>${title}</strong> - ${description}</li>`;
                        });
                        html += '</ul>';
                        totalEvents += items.length;
                    }
                });
                
                if (totalEvents === 0) {
                    html += '<p>è¯¥å¹´ä»½æ²¡æœ‰ç›¸å…³äº‹ä»¶ã€‚</p>';
                } else {
                    html += `<p><strong>${year}å¹´å…±æœ‰ ${totalEvents} ä¸ªäº‹ä»¶</strong></p>`;
                }
                
                resultDiv.innerHTML = html;
                
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">âŒ ç­›é€‰è¿‡ç¨‹ä¸­å‡ºé”™ï¼š${error.message}</span>`;
            }
        }

        // å¯¼å‡ºJSONåŠŸèƒ½
        function exportJSON() {
            const resultDiv = document.getElementById('export-result');
            resultDiv.style.display = 'block';
            
            try {
                BitcoinTimelineUtils.exportToJSON(bitcoinData, 'bitcoin-timeline-data.json');
                resultDiv.innerHTML = '<span class="success">âœ… JSONæ–‡ä»¶å·²æˆåŠŸå¯¼å‡ºï¼</span>';
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">âŒ å¯¼å‡ºJSONå¤±è´¥ï¼š${error.message}</span>`;
            }
        }

        // å¯¼å‡ºCSVåŠŸèƒ½
        function exportCSV() {
            const resultDiv = document.getElementById('export-result');
            resultDiv.style.display = 'block';
            
            try {
                BitcoinTimelineUtils.exportToCSV(bitcoinData, 'bitcoin-timeline-data.csv');
                resultDiv.innerHTML = '<span class="success">âœ… CSVæ–‡ä»¶å·²æˆåŠŸå¯¼å‡ºï¼</span>';
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">âŒ å¯¼å‡ºCSVå¤±è´¥ï¼š${error.message}</span>`;
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨éªŒè¯æ•°æ®
        window.addEventListener('load', function() {
            validateData();
        });
    </script>
</body>
</html>
